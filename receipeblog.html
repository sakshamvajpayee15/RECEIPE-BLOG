<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Simple Recipe Blog</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f4f4f4; }
    h1 { text-align:center; }
    .container { width:90%; max-width:800px; margin:10px auto; }
    input, textarea, select, button { width:100%; margin:5px 0; padding:6px; }
    .recipe { background:#fff; padding:10px; margin:8px 0; border:1px solid #ccc; }
    .title { font-weight:bold; }
    .small { font-size:13px; color:#555; }
  </style>
</head>
<body>

<h1>Recipe Blog</h1>

<div class="container">

  <!-- Search -->
  <input id="search" type="text" placeholder="Search recipe by name..." />

  <!-- Recipe list -->
  <div id="recipes"></div>

  <hr>

  <!-- Add recipe -->
  <h3>Add Your Recipe</h3>
  <input id="newTitle" type="text" placeholder="Recipe name" />
  <textarea id="newIngredients" placeholder="Ingredients"></textarea>
  <textarea id="newSteps" placeholder="Steps"></textarea>
  <button id="addBtn">Add Recipe</button>

</div>

<script>
  // Simple data
  let recipes = [
    { title: "Pancakes", ingredients: "Flour, Milk, Egg", steps: "Mix and fry.", rating: 4, user:false },
    { title: "Maggi", ingredients: "Noodles, Water, Masala", steps: "Boil and mix.", rating: 5, user:false }
  ];

  const recipesDiv = document.getElementById("recipes");
  const searchInput = document.getElementById("search");

  // Show recipes
  function showRecipes(list) {
    recipesDiv.innerHTML = "";
    if (list.length === 0) {
      recipesDiv.innerHTML = "<p>No recipes found.</p>";
      return;
    }

    list.forEach((r, index) => {
      const div = document.createElement("div");
      div.className = "recipe";
      div.innerHTML = `
        <div class="title">${r.title}</div>
        <div class="small">Ingredients: ${r.ingredients}</div>
        <div class="small">Steps: ${r.steps}</div>
        <div class="small">
          Rating:
          <select data-index="${index}">
            ${[1,2,3,4,5].map(n => `
              <option value="${n}" ${n===r.rating ? "selected" : ""}>${n}</option>
            `).join("")}
          </select>
          ${r.user ? "(user recipe)" : ""}
        </div>
      `;
      recipesDiv.appendChild(div);
    });

    // Rating change
    document.querySelectorAll("select[data-index]").forEach(sel => {
      sel.onchange = function() {
        const i = parseInt(this.getAttribute("data-index"));
        recipes[i].rating = parseInt(this.value);
      };
    });
  }

  // Search by title
  searchInput.oninput = function() {
    const q = this.value.toLowerCase();
    const filtered = recipes.filter(r => r.title.toLowerCase().includes(q));
    showRecipes(filtered);
  };

  // Add new recipe
  document.getElementById("addBtn").onclick = function() {
    const t = document.getElementById("newTitle").value.trim();
    const ing = document.getElementById("newIngredients").value.trim();
    const st = document.getElementById("newSteps").value.trim();

    if (!t || !ing || !st) {
      alert("Please fill all fields");
      return;
    }

    recipes.push({ title:t, ingredients:ing, steps:st, rating:0, user:true });

    // clear form
    document.getElementById("newTitle").value = "";
    document.getElementById("newIngredients").value = "";
    document.getElementById("newSteps").value = "";
    searchInput.value = "";

    showRecipes(recipes);
  };

  // first load
  showRecipes(recipes);
</script>

</body>
</html>
